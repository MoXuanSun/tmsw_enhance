# 東方月灵传增强拓展

## 一、 这是什么
这是一张星际争霸游戏大厅自定义地图的增强拓展

> battlenet:://starcraft/map/5/109989
>
> 地图核心搬运自亚服地图“东方月灵传(Ver.1.992)”
>
> 感谢sym、岛风、奇缘对现版本的汉化支持。
>
> 感谢谐q、辉夜对之前版本汉化做出的贡献。
## 二、 如何使用
- 将脚本文件打包成mod依赖
- 在mapinit事件中引用initaddons()
## 三、 Q&A
### Q1：哪一个版本的地图？
国服版本地图，即核心为1.992版本
### Q2：为什么有那么多注释？
个人习惯
### Q3：是否对原地图有修改？
覆盖了一些触发器，可以在原地图上运行，不需要修改脚本或是数据
### Q4：是否可以提交pr？

可以
### Q5 基本原理？
 - 通过动态切换全局变量、更新科技树、行为、效果和技能来实现单人多个单位不同等级技能
### Q6: 本拓展的意义？

- 为了方便测试
- 供学习与交流

## 四、项目结构

### 1.addon_overwritenXXX
- 覆盖原图触发器
- 这里只会实现部分原图功能，会删除一些没有必要的
- 这些文件中不会写拓展函数方法，只会调用拓展函数
- 如果地图更新，这部分很有可能需要重写
### 2.addon_initXXX
- 初始化
### 3.addon_XXX_utils
- 工具方法
### 4.addon_gameFunc_XXX
- 拓展函数，比如动态切换数据等
### 5.addon_ui_XXX
- UI
### 6.addon_global
- 全局变量、函数声明
### 7.addon_command
- 指令系统
## 五、计划
### 0.地图拓展
- [ ] 动态切换全局变量、科技升级
### 1.指令系统
- [x] -summon heroid player(1 for ally,0 for enemy)
- [x] -testCH 测试次数 暴击点数
  - 测试暴击
- [x] -testRandomFixed 次数
  - 测试随机数
- [x] -testRandomFixedCycle 次数 是否忽略小数
  - 测试伪随机碰撞
- [ ] -effect effect_name
- [ ] -behavior behavior_name

### 2.主菜单
- [ ] 支持创建英雄，可以选择创建的阵营
- [ ] 支持给予选择单位无敌、无cd无限蓝量
- [ ] 支持获取单位视野
- [ ] 支持添加木偶
- [ ] 支持开启伤害计算
- [ ] 支持天赋选择，可以给予选择单位天赋对应效果
- [ ] 如果英雄有多套技能，支持切换技能组合
- [ ] 支持切换天赋，限制天赋树